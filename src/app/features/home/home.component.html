<section
  class="home app-layout__surface app-layout__surface--hero"
  appLayoutContent
  [appLayoutContentNavigationKey]="layoutNavigationKey()"
>
  <div class="utility-container">
    <div class="app-layout__body home__body home__stack">
      <header class="home__header app-hero">
        <div class="app-hero__intro">
          <p class="app-hero__eyebrow">{{ heroEyebrowKey | translate }}</p>
          <h1 class="app-hero__title">{{ headerTaglineKey | translate }}</h1>
          <p class="app-hero__description">{{ heroDescriptionKey | translate }}</p>
        </div>
      </header>

      <main class="home__main home__stack">
        <section class="home__card home__stack" aria-labelledby="homeCardTitle">
          <div class="home__card-header home__stack">
            <div>
              <h2 id="homeCardTitle" class="home__card-title">{{ headerTitleKey | translate }}</h2>
              <p class="home__card-subtitle">{{ heroActionKey | translate }}</p>
            </div>
            <div class="home__tabs" role="tablist">
              <div
                *ngFor="let tab of tabs"
                appAccessibleButton
                class="home__tab"
                appAccessibleButtonRole="tab"
                [attr.aria-selected]="isTabActive(tab.id)"
                (appAccessibleButtonActivated)="selectTab(tab.id)"
              >
                {{ tab.labelKey | translate }}
              </div>
            </div>
          </div>
          <div class="home__card-body home__stack">
            <ng-container [ngSwitch]="activeTab()">
              <div *ngSwitchCase="'search'" class="home__panel home__panel--search home__stack">
                <app-route-search-form
                  [initialSelection]="currentSelection$ | async"
                  (selectionConfirmed)="onSelectionConfirmed($event)"
                ></app-route-search-form>
              </div>
              <div *ngSwitchCase="'recent'" class="home__panel home__panel--recent home__stack">
                <header class="home__panel-header">
                  <div class="home__panel-heading home__stack">
                    <h3 class="home__panel-title">{{ recentStopsTitleKey | translate }}</h3>
                  </div>
                  <div
                    *ngIf="recentClearActionVisible()"
                    appAccessibleButton
                    class="app-button app-button--ghost home__panel-action"
                    (appAccessibleButtonActivated)="onClearRecentSearches()"
                  >
                    {{ recentStopsClearKey | translate }}
                  </div>
                </header>
                <app-home-recent-searches
                  #recentSearches
                  (itemsStateChange)="onRecentItemsStateChange($event)"
                ></app-home-recent-searches>
              </div>
              <div *ngSwitchCase="'favorites'" class="home__panel home__panel--favorites home__stack">
                <header class="home__panel-header">
                  <div class="home__panel-heading home__stack">
                    <h3 class="home__panel-title">{{ favoritesTitleKey | translate }}</h3>
                  </div>
                  <div
                    appAccessibleButton
                    class="app-button app-button--ghost home__panel-action"
                    (appAccessibleButtonActivated)="openFavoritesView()"
                  >
                    {{ favoritesActionKey | translate }}
                  </div>
                </header>
                <ng-container *ngIf="hasFavorites(); else favoritesEmpty">
                  <ul class="home-recent__list" role="list">
                    <li class="home-recent__item" *ngFor="let favorite of favoritePreview(); trackBy: trackFavorite">
                      <app-interactive-card
                        [ngClass]="favoriteCardHostClasses"
                        [bodyClasses]="favoriteCardBodyClasses"
                        (primaryActivated)="openFavorite(favorite)"
                      >
                        <div class="home-favorite-card__content">
                          <div class="home-favorite-card__header">
                            <span class="home-favorite-card__name">{{ favorite.name }}</span>
                            <span class="home-favorite-card__arrow" aria-hidden="true">â†’</span>
                            <span class="home-favorite-card__location">{{ favorite.municipality }}</span>
                          </div>
                          <div class="home-favorite-card__details">
                            <span class="home-favorite-card__chip">
                              <span class="home-favorite-card__chip-label">{{ favoritesCodeLabelKey | translate }}</span>
                              <span class="home-favorite-card__chip-value">{{ favorite.code }}</span>
                            </span>
                            <span class="home-favorite-card__chip">
                              <span class="home-favorite-card__chip-label">{{ favoritesNucleusLabelKey | translate }}</span>
                              <span class="home-favorite-card__chip-value">{{ favorite.nucleus }}</span>
                            </span>
                          </div>
                        </div>
                      </app-interactive-card>
                    </li>
                  </ul>
                </ng-container>
                <ng-template #favoritesEmpty>
                  <p class="home-recent__empty">{{ favoritesEmptyKey | translate }}</p>
                </ng-template>
              </div>
            </ng-container>
          </div>
        </section>
      </main>
    </div>
  </div>
</section>

<ui-dialog-surface>
  <h2 uiDialogTitle>{{ titleKey | translate }}</h2>
  <p *ngIf="descriptionKey" uiDialogDescription class="nearby-dialog__description">
    {{ descriptionKey | translate }}
  </p>
  <div class="nearby-dialog__body" [attr.aria-busy]="isLoading ? 'true' : 'false'">
    <div *ngIf="isLoading" class="nearby-dialog__loading">
      <span class="nearby-dialog__spinner" aria-hidden="true"></span>
      <p class="nearby-dialog__loading-text">{{ loadingKey | translate }}</p>
    </div>
    <ul *ngIf="state === 'success' && stops.length" class="nearby-dialog__list" role="list">
      <li *ngFor="let stop of stops" class="nearby-dialog__item">
        <button type="button" class="nearby-dialog__item-button" (click)="selectStop(stop)">
          <span class="material-symbols-outlined nearby-dialog__item-icon">{{ stopIcon }}</span>
          <div class="nearby-dialog__item-body">
            <p class="nearby-dialog__item-title">{{ stop.title }}</p>
            <p class="nearby-dialog__item-distance">
              {{ stop.distanceKey | translate: { value: stop.distanceValue } }}
            </p>
          </div>
        </button>
      </li>
    </ul>
    <p *ngIf="state === 'success' && !stops.length" class="nearby-dialog__message">
      {{ emptyKey | translate }}
    </p>
    <p *ngIf="state === 'permissionDenied'" class="nearby-dialog__message nearby-dialog__message--error">
      {{ permissionDeniedKey | translate }}
    </p>
    <p *ngIf="state === 'notSupported'" class="nearby-dialog__message nearby-dialog__message--error">
      {{ notSupportedKey | translate }}
    </p>
    <p *ngIf="state === 'unknown'" class="nearby-dialog__message nearby-dialog__message--error">
      {{ unknownErrorKey | translate }}
    </p>
  </div>
  <div uiDialogFooter class="nearby-dialog__actions">
    <button
      *ngIf="!isLoading && state !== 'success'"
      type="button"
      class="btn btn--ghost btn--md"
      (click)="retry()"
    >
      {{ retryKey | translate }}
    </button>
    <button type="button" class="btn btn--primary btn--md" (click)="close()">
      {{ closeKey | translate }}
    </button>
  </div>
</ui-dialog-surface>

<div class="route-search">
  <header class="route-search__header">
    <h1 class="route-search__title">{{ translationKeys.title | translate }}</h1>
    <p class="route-search__description">{{ translationKeys.description | translate }}</p>
  </header>
  <main class="route-search__main">
    <ng-container *ngIf="selection() as current; else emptyState">
      <section class="route-search__summary">
        <div class="route-search__stops">
          <div class="route-search__stop">
            <span class="route-search__label">{{ translationKeys.originLabel | translate }}</span>
            <span class="route-search__value">{{ current.origin.name }}</span>
          </div>
          <span class="material-symbols-outlined route-search__icon">arrow_forward</span>
          <div class="route-search__stop">
            <span class="route-search__label">{{ translationKeys.destinationLabel | translate }}</span>
            <span class="route-search__value">{{ current.destination.name }}</span>
          </div>
        </div>
        <div class="route-search__date">
          <span class="route-search__label">{{ translationKeys.dateLabel | translate }}</span>
          <span class="route-search__value">{{ current.queryDate | date: 'longDate' }}</span>
        </div>
      </section>
      <section class="route-search__results">
        <h2 class="route-search__results-title">{{ translationKeys.results | translate }}</h2>
        <mat-card
          appearance="outlined"
          class="route-search__result-card"
          *ngFor="let match of current.lineMatches; trackBy: trackLineMatch"
        >
          <div class="route-search__result-header">
            <span class="route-search__line">{{ match.lineId }}</span>
            <span class="route-search__direction">#{{ match.direction }}</span>
          </div>
          <div class="route-search__result-body">
            <div class="route-search__result-group">
              <span class="route-search__label">{{ translationKeys.originLabel | translate }}</span>
              <span class="route-search__value">
                {{ current.origin.name }}
                <ng-container *ngIf="match.originStopIds.length > 1">
                  ({{ match.originStopIds.length }})
                </ng-container>
              </span>
            </div>
            <div class="route-search__result-group">
              <span class="route-search__label">{{ translationKeys.destinationLabel | translate }}</span>
              <span class="route-search__value">
                {{ current.destination.name }}
                <ng-container *ngIf="match.destinationStopIds.length > 1">
                  ({{ match.destinationStopIds.length }})
                </ng-container>
              </span>
            </div>
          </div>
        </mat-card>
      </section>
    </ng-container>
  </main>
  <footer class="route-search__footer">
    <nav class="route-search__bottom-nav">
      <a
        *ngFor="let item of bottomNavigationItems"
        class="route-search__bottom-nav-item"
        [routerLink]="item.commands"
        routerLinkActive="route-search__bottom-nav-item--active"
        [routerLinkActiveOptions]="{ exact: true }"
        #link="routerLinkActive"
        [attr.aria-current]="link.isActive ? 'page' : null"
      >
        <span class="material-symbols-outlined">{{ item.icon }}</span>
        <span class="route-search__bottom-nav-label">{{ item.labelKey | translate }}</span>
      </a>
    </nav>
  </footer>
</div>
<ng-template #emptyState>
  <section class="route-search__empty">
    <p>{{ translationKeys.sampleResult | translate }}</p>
  </section>
</ng-template>

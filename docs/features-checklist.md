# Feature Checklist

- [x] Display route search results as a unified list of bus departures after submitting the form.
- [x] Return accurate schedules for future dates without falsely reporting missing services.
- [x] Keep the route search form populated on the results view so travelers can refine queries in place.
- [ ] Maintain a consistent navigation layout and responsive timeline presentation across all views.
- [x] Detect Spanish national and Andalusian public holidays to adjust route timetables and highlight festivo coverage.
- [x] Mirror Andalusian observed holidays by treating Monday as festivo when the official date falls on Sunday.

## UI Refactor â€“ Unified Design System
- [x] Define theme tokens and global CSS utilities (buttons, forms, surfaces)
- [ ] Replace old UI components with unified primitives
  - [x] Introduce FormField and Input primitives with ControlValueAccessor support
  - [x] Implement remaining primitives (Textarea, Select, Checkbox, Radio, Switch, etc.)
    - [x] Add Textarea primitive with ControlValueAccessor support
    - [x] Implement Select primitive with shared control tokens
    - [x] Implement Checkbox primitive with shared control tokens
    - [x] Implement Radio primitive with shared control tokens
    - [x] Implement Switch primitive with shared control tokens
  - [ ] Replace feature screens to use unified primitives
    - [x] Favorites view migrated to FormField, Input, and button utilities
      - [x] Restore favorites styling parity with the legacy theme using shared tokens
    - [ ] Migrate remaining home, search, and stop detail forms
      - [x] Home dashboard actions migrated to shared button utilities and palette tokens
        - [x] Restore hero card, segmented controls, and recent cards to the original visual theme via tokens
      - [ ] Refactor route search form to use shared primitives
      - [ ] Update stop detail filters to shared primitives
  - [ ] Remove deprecated component implementations
  - [ ] Remove duplicated buttons, inputs, and modals
    - [x] Replace confirm dialog actions with global button classes
    - [x] Remove legacy dialog layout implementation
    - [ ] Audit remaining views for outdated button styles and modal code
      - [x] Favorites view aligned with global button classes
      - [x] Home dashboard actions use shared button classes
      - [ ] Review remaining feature templates
- [ ] Implement a single reusable Dialog system
  - [x] Build overlay-based dialog service, container, and context primitives
  - [x] Add dialog surface component and section directives styled with tokens
  - [x] Migrate existing dialogs away from Angular Material
  - [x] Replace feature dialog usages with the new service
  - [ ] Ensure all components respect the primary palette
    - [x] Favorites styles migrated to palette tokens
      - [x] Favorites visuals aligned with the reference theme after QA review
    - [ ] Verify remaining feature styling
      - [x] Home dashboard surfaces restyled with palette tokens
        - [x] Legacy hero aesthetics preserved while retaining refactored structure
      - [ ] Review route search layout tokens
- [ ] Verify accessibility and translation integration
- [ ] Update docs/ui-theme.md after completion
